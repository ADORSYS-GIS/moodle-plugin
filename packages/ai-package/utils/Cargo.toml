[package]
name = "ai_utils"
version = "0.1.0"
edition = "2021"
description = "Shared utilities for the AI package: config, logging, metrics, and errors"
license = "Apache-2.0"
authors = ["GIS Moodle Team <gis@moodle.com>"]

[dependencies]
serde = { version = "1.0.210", features = ["derive"] }
serde_json = "1.0.128"
serde_yaml = "0.9.34"
thiserror = "1.0.64"
tracing = "0.1.40"
tracing-subscriber = { version = "0.3.18", features = ["fmt", "env-filter", "registry"] }
tracing-appender = "0.2.3"
is-terminal = "0.4.13"
metrics = "0.24.0"
metrics-exporter-prometheus = { version = "0.16.1", optional = true }
metrics-util = "0.19.1"
once_cell = "1.21.3"
tokio = { version = "1.0", features = ["full"], optional = true }

[features]
prometheus = ["metrics-exporter-prometheus", "tokio"]

[dev-dependencies]
serial_test = "3.1.1"
tempfile = "3.13.0"
lazy_static = "1.5.0"
tokio = { version = "1.0", features = ["full", "test-util"] }

[[bin]]
name = "ai_utils"
path = "src/main.rs"
required-features = ["prometheus"]